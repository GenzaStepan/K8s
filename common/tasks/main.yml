- name: 
  apt:
    name: ['curl', 'git', 'apt-transport-https', 'gnupg2', 'python', 'openssh-server']
    update_cache: yes

- name: Update apt cache
  apt:
    update_cache: yes

- name: allow OpenSSH
  ufw:
    rule: allow
    name: OpenSSH
    
- name: Enable & start sshd
  systemd:
    name: sshd
    state: restarted
    enabled: yes
    daemon_reload: yes

- name: Enable & start ssh
  systemd:
    name: ssh
    state: restarted
    enabled: yes
    daemon_reload: yes
    
- name: Create dir k8s
  file:
    path: /k8s
    state: directory
    
- name: Create dir k8s/git
  file:
    path: /k8s/git
    state: directory

- git:
    repo: 'https://github.com/GenzaStepan/K8s.git'
    dest: /k8s/git
    clone: yes
    update: yes
    
- copy: src=/k8s/git/create-config.sh dest=/k8s